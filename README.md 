# Time Greeting Block - Complete Installation Guide

This is a complete, ready-to-use WordPress plugin with **no build tools required**. Everything is pre-compiled and ready to install.

## 📁 **Plugin Directory Structure**

Create the following directory structure in your `wp-content/plugins/` folder:

```
time-greeting-block/
├── assets/
│   ├── block-editor.js      # Complete vanilla JavaScript for Gutenberg
│   ├── block-editor.css     # Editor styles
│   └── block-style.css      # Frontend styles
├── languages/               # Translation files (optional)
├── block.json              # Block configuration (Block API v3)
├── time-greeting-block.php # Main plugin file with cleanup
└── README.md               # This file
```

## 🚀 **Installation Steps**

1. **Create the plugin directory:**
   ```bash
   mkdir wp-content/plugins/time-greeting-block
   mkdir wp-content/plugins/time-greeting-block/assets
   ```

2. **Copy all files** from the artifacts into their respective locations

3. **Activate the plugin** in WordPress admin

That's it! No build process, no npm, no compilation required.

## ✨ **Features**

### **🎯 Block API v3 Compliant**
- Modern Gutenberg block with full Block API v3 support
- Server-side rendering for better performance
- Proper block wrapper attributes
- Full theme integration

### **🧹 Complete Cleanup**
- **Automatically removes ALL plugin data** when deactivated
- Cleans up options, transients, user meta, post meta
- No orphaned data left in database
- "Good citizen" plugin behavior

### **🎨 Rich Editor Experience**
- Live preview in Gutenberg editor
- Organized inspector controls with helpful descriptions
- Timezone dropdown with common options + custom
- Date format presets + custom PHP date formats
- Text alignment support
- Color and typography support

### **⚡ Performance Optimized**
- CSS only loads when block is used
- Minimal JavaScript footprint
- Efficient server-side rendering
- No external dependencies

## 🔧 **Usage**

### **In Gutenberg Editor**
1. Add new block
2. Search for "Time Greeting" 
3. Configure in sidebar panel
4. Preview updates live

### **Shortcode**
```php
[time_greeting]
[time_greeting display="date"]
[time_greeting display="both" timezone="America/Chicago" tz_abbr="CT"]
```

### **Page Builders (Bricks, etc.)**
```php
<?php time_greeting_echo(); ?>
```

### **Custom Parameters**
- `display`: "greeting", "date", "both"
- `date_format`: Any PHP date format (e.g., "F j, Y")
- `timezone`: PHP timezone identifier (e.g., "America/New_York")
- `tz_abbr`: Timezone abbreviation (e.g., "ET")

## ⚙️ **Settings**

Navigate to **Settings > Time Greeting** to configure:

- **Time Periods**: When morning, afternoon, evening, night begin
- **Night Message**: Custom message with {time} and {tz} placeholders
- **Default Timezone**: Site-wide default timezone
- **Default Timezone Abbreviation**: Default abbreviation

## 🧹 **Cleanup Behavior**

This plugin is designed to be a "good citizen":

### **On Deactivation:**
- ✅ Removes all plugin options (`tgb_settings`)
- ✅ Clears all transient data
- ✅ Removes any user meta
- ✅ Removes any post meta
- ✅ Cancels scheduled events
- ✅ Clears cached data
- ✅ No database traces left behind

### **Manual or Automatic:**
- Works whether plugin is deleted manually or through WordPress
- Cleanup runs on both deactivation AND uninstall hooks
- No orphaned data regardless of removal method

## 🎨 **Styling & Themes**

### **CSS Classes:**
- `.wp-block-time-greeting-block-time-greeting` - Main wrapper
- `.time-greeting` - Greeting text container
- `.time-greeting-date` - Date container
- `.has-text-align-center` - Alignment classes

### **Theme Support:**
- Inherits theme typography
- Supports WordPress color palette
- Responds to theme spacing
- Dark mode compatible
- High contrast mode support

## 🔒 **Security Features**

- Input sanitization on all user data
- Date format validation to prevent code execution
- Timezone validation against PHP timezone list
- Proper escaping of all output
- Nonce protection on settings forms

## 📱 **Accessibility**

- Semantic `<time>` elements with datetime attributes
- Proper ARIA labels
- Screen reader friendly
- Keyboard navigation support
- High contrast mode compatible
- Reduced motion respect

## 🌍 **Internationalization**

- Translation ready with `time-greeting-block` text domain
- All strings wrapped in translation functions
- Language files directory included
- RTL language support

## 🐛 **Troubleshooting**

### **Block Doesn't Appear**
1. Check that all files are in correct directories
2. Verify `block.json` is in plugin root
3. Check browser console for JavaScript errors

### **Styles Not Loading**
1. Ensure CSS files exist in `assets/` directory
2. Clear any caching plugins
3. Check file permissions

### **Shortcode Not Working**
1. Plugin must be activated
2. Check shortcode spelling: `[time_greeting]`
3. Verify in theme that supports shortcodes

## 📝 **File Checklist**

Before installing, ensure you have all these files:

- ✅ `time-greeting-block.php` - Main plugin file
- ✅ `block.json` - Block configuration
- ✅ `assets/block-editor.js` - Editor JavaScript
- ✅ `assets/block-editor.css` - Editor styles
- ✅ `assets/block-style.css` - Frontend styles

## 🔄 **Updates**

To update the plugin:
1. Deactivate (triggers automatic cleanup)
2. Replace files with new versions
3. Reactivate

Your settings will be preserved during updates unless you specifically deactivate first.

---

**Ready to use!** This plugin requires no additional setup, compilation, or build processes.